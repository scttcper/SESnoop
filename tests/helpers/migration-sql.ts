export const migrationSql =
  "CREATE TABLE `events` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`message_id` integer NOT NULL,\n\t`webhook_id` integer,\n\t`event_type` text NOT NULL,\n\t`recipient_email` text NOT NULL,\n\t`event_at` integer NOT NULL,\n\t`ses_message_id` text NOT NULL,\n\t`event_data` text DEFAULT '{}' NOT NULL,\n\t`raw_payload` text DEFAULT '{}' NOT NULL,\n\t`bounce_type` text,\n\t`created_at` integer DEFAULT (unixepoch() * 1000) NOT NULL,\n\t`updated_at` integer DEFAULT (unixepoch() * 1000) NOT NULL,\n\tFOREIGN KEY (`message_id`) REFERENCES `messages`(`id`) ON UPDATE no action ON DELETE cascade,\n\tFOREIGN KEY (`webhook_id`) REFERENCES `webhooks`(`id`) ON UPDATE no action ON DELETE set null\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `events_dedupe_unique` ON `events` (`ses_message_id`,`event_type`,`recipient_email`,`event_at`);--> statement-breakpoint\nCREATE INDEX `events_event_type_index` ON `events` (`event_type`);--> statement-breakpoint\nCREATE INDEX `events_recipient_email_index` ON `events` (`recipient_email`);--> statement-breakpoint\nCREATE INDEX `events_event_at_index` ON `events` (`event_at`);--> statement-breakpoint\nCREATE INDEX `events_bounce_type_index` ON `events` (`bounce_type`);--> statement-breakpoint\nCREATE TABLE `messages` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`source_id` integer NOT NULL,\n\t`ses_message_id` text NOT NULL,\n\t`source_email` text,\n\t`subject` text,\n\t`sent_at` integer,\n\t`mail_metadata` text DEFAULT '{}' NOT NULL,\n\t`events_count` integer DEFAULT 0 NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch() * 1000) NOT NULL,\n\t`updated_at` integer DEFAULT (unixepoch() * 1000) NOT NULL,\n\tFOREIGN KEY (`source_id`) REFERENCES `sources`(`id`) ON UPDATE no action ON DELETE cascade\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `messages_ses_message_id_unique` ON `messages` (`ses_message_id`);--> statement-breakpoint\nCREATE INDEX `messages_sent_at_index` ON `messages` (`sent_at`);--> statement-breakpoint\nCREATE INDEX `messages_source_email_index` ON `messages` (`source_email`);--> statement-breakpoint\nCREATE TABLE `sources` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`name` text NOT NULL,\n\t`token` text NOT NULL,\n\t`color` text NOT NULL,\n\t`retention_days` integer,\n\t`created_at` integer DEFAULT (unixepoch() * 1000) NOT NULL,\n\t`updated_at` integer DEFAULT (unixepoch() * 1000) NOT NULL\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `sources_token_unique` ON `sources` (`token`);--> statement-breakpoint\nCREATE TABLE `tasks` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`name` text NOT NULL,\n\t`done` integer DEFAULT false NOT NULL\n);\n--> statement-breakpoint\nCREATE TABLE `webhooks` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`sns_message_id` text NOT NULL,\n\t`sns_type` text NOT NULL,\n\t`sns_timestamp` integer NOT NULL,\n\t`raw_payload` text DEFAULT '{}' NOT NULL,\n\t`processed_at` integer,\n\t`created_at` integer DEFAULT (unixepoch() * 1000) NOT NULL,\n\t`updated_at` integer DEFAULT (unixepoch() * 1000) NOT NULL\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `webhooks_sns_message_id_unique` ON `webhooks` (`sns_message_id`);--> statement-breakpoint\nCREATE INDEX `webhooks_processed_at_index` ON `webhooks` (`processed_at`);";
